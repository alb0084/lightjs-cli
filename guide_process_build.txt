âš™ï¸ LightJS â€“ Procedura Build + Installer
ğŸ“ Struttura corretta progetto
LIGHTJS-INSTALLER/
â”‚
â”œâ”€ CMakeLists.txt              â† quello che hai (con CPack + NSIS)
â”œâ”€ light.exe                   â† la CLI giÃ  compilata
â”œâ”€ third_party/                â† dipendenze (es. webview/)
â”œâ”€ README.md
â””â”€ build/                      â† verrÃ  rigenerata

ğŸ§± 1. PULIZIA PRE-BUILD

Apri PowerShell o Git Bash nella cartella LIGHTJS-INSTALLER
e lancia:

rm -rf build
mkdir build
cd build

ğŸ—ï¸ 2. CONFIGURAZIONE CMAKE

Esegui la configurazione del progetto:

cmake -G "Visual Studio 17 2022" -A x64 -DCMAKE_BUILD_TYPE=Release ..


ğŸ“Œ Cosa fa:

prepara la build per Windows 64-bit

genera i file .sln e .vcxproj per MSBuild

legge le impostazioni del tuo CMakeLists.txt

non compila ancora

ğŸ”¨ 3. COMPILAZIONE

Costruisci i target necessari (incluso quello per CPack):

cmake --build . --config Release


ğŸ“Œ Cosa fa:

esegue la build del progetto

prepara i file per lâ€™installer (senza ancora creare il .exe)

ğŸ“¦ 4. CREAZIONE INSTALLER

Genera il file .exe dellâ€™installer con CPack:

cpack -C Release


ğŸ“Œ Cosa fa:

comprime light.exe e third_party/

usa NSIS (makensis.exe) per creare lâ€™installer finale

ğŸ“ 5. DOVE TROVARLO

Dopo il comando sopra, troverai il tuo installer in uno di questi percorsi:

build/LightJS-1.0.0-win64.exe


oppure:

build/_CPack_Packages/win64/NSIS/LightJS-1.0.0-win64.exe

ğŸš€ 6. TEST INSTALLER

Per provarlo subito:

start build/LightJS-1.0.0-win64.exe


oppure doppio click sul file.

ğŸ§¹ 7. (Facoltativo) Aggiornamento versione

Quando vuoi creare una nuova release, apri il tuo CMakeLists.txt e aggiorna:

set(CPACK_PACKAGE_VERSION "1.0.1")


Poi ripeti i passaggi dal punto 1.